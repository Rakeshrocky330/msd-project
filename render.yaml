services:
  - type: web
    name: msd-project-backend
    runtime: node
    region: oregon
    plan: free
    
    # Build configuration
    buildCommand: npm install
    startCommand: node backend/server/index.js
    
    # Health check
    healthCheckPath: /health
    
    # Environment variables
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: "5000"
      - key: MONGODB_URI
        sync: false  # Set manually in Render dashboard
      - key: JWT_SECRET
        sync: false  # Set manually in Render dashboard
      - key: CLIENT_URL
        value: https://your-vercel-frontend-url.vercel.app
      - key: EMAIL_USER
        sync: false  # Optional: Set if using email
      - key: EMAIL_PASSWORD
        sync: false  # Optional: Set if using email
    
    # Ignore patterns
    ignoreFile: .renderignore
    
    # Routes
    routes:
      - path: /api
        destination: backend/server
      - path: /
        destination: backend/server
